# AI Agent Registry

## Overview

7 AI Agents have been configured with Directus accounts and static tokens stored in Google Secret Manager.

## Planning Team (Strategy & Review)

| Agent | Email | Purpose | Token Secret |
|-------|-------|---------|--------------|
| ChatGPT | agent.chatgpt@incomexsaigoncorp.vn | Strategy & Architecture | DIRECTUS_AGENT_CHATGPT_TOKEN |
| Gemini | agent.gemini@incomexsaigoncorp.vn | Review & Supervision | DIRECTUS_AGENT_GEMINI_TOKEN |
| Claude Desktop | agent.claude_desktop@incomexsaigoncorp.vn | Analysis & Orchestration | DIRECTUS_AGENT_CLAUDE_DESKTOP_TOKEN |

## Execution Team (Development & Automation)

| Agent | Email | Purpose | Token Secret |
|-------|-------|---------|--------------|
| Codex CLI | agent.codex_cli@incomexsaigoncorp.vn | Development | DIRECTUS_AGENT_CODEX_CLI_TOKEN |
| Claude Code CLI | agent.claude_code_cli@incomexsaigoncorp.vn | Development | DIRECTUS_AGENT_CLAUDE_CODE_CLI_TOKEN |
| Antigravity | agent.antigravity@incomexsaigoncorp.vn | Local Automation | DIRECTUS_AGENT_ANTIGRAVITY_TOKEN |
| Gemini CLI | agent.gemini_cli@incomexsaigoncorp.vn | Local Tasks | DIRECTUS_AGENT_GEMINI_CLI_TOKEN |

---

## Role & Permissions

All agents are assigned the **AI_AGENT** role with the following permissions:

| Action | Collections | Notes |
|--------|-------------|-------|
| ✅ Read | agent_views, feedbacks, pages, globals | All fields |
| ✅ Create | feedbacks | Can create new feedback |
| ⏳ Update | feedbacks | Own items only (pending enforcement) |
| ❌ Delete | - | Not allowed |
| ❌ Schema | - | No schema modification |

---

## Usage

### Get Agent Token from Secret Manager

```bash
# Get token for ChatGPT agent
gcloud secrets versions access latest \
  --secret="DIRECTUS_AGENT_CHATGPT_TOKEN" \
  --project="github-chatgpt-ggcloud"

# Get token for any agent
AGENT_ID="claude_code_cli"
gcloud secrets versions access latest \
  --secret="DIRECTUS_AGENT_${AGENT_ID^^}_TOKEN" \
  --project="github-chatgpt-ggcloud"
```

### Use Token in API Calls

```bash
TOKEN=$(gcloud secrets versions access latest --secret="DIRECTUS_AGENT_CHATGPT_TOKEN")

# Read agent_views
curl -s "$DIRECTUS_URL/items/agent_views" \
  -H "Authorization: Bearer $TOKEN"

# Create feedback
curl -s -X POST "$DIRECTUS_URL/items/feedbacks" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "linked_entity_ref": "agent_views/1",
    "feedback_type": "suggestion",
    "content": "This is a test feedback",
    "source_model": "chatgpt"
  }'
```

---

## Secret Manager Inventory

| Secret Name | Purpose | Created |
|-------------|---------|---------|
| DIRECTUS_ADMIN_TOKEN_test | Admin static token | WEB-35-ULTRA |
| DIRECTUS_AGENT_CHATGPT_TOKEN | ChatGPT agent token | WEB-35-ULTRA |
| DIRECTUS_AGENT_GEMINI_TOKEN | Gemini agent token | WEB-35-ULTRA |
| DIRECTUS_AGENT_CLAUDE_DESKTOP_TOKEN | Claude Desktop agent token | WEB-35-ULTRA |
| DIRECTUS_AGENT_CODEX_CLI_TOKEN | Codex CLI agent token | WEB-35-ULTRA |
| DIRECTUS_AGENT_CLAUDE_CODE_CLI_TOKEN | Claude Code CLI agent token | WEB-35-ULTRA |
| DIRECTUS_AGENT_ANTIGRAVITY_TOKEN | Antigravity agent token | WEB-35-ULTRA |
| DIRECTUS_AGENT_GEMINI_CLI_TOKEN | Gemini CLI agent token | WEB-35-ULTRA |

---

## Directus Configuration

### Policy: AI_AGENT Policy
- **ID:** 6de9d877-962a-4c50-946f-3df2da7af945
- **Admin Access:** No
- **App Access:** Yes

### Role: AI_AGENT
- **ID:** 70b25a71-9d69-4b1f-8b50-79dbd0c1347a
- **Linked Policy:** AI_AGENT Policy

---

## Maintenance

### Regenerate Agent Token

```bash
# Generate new token
NEW_TOKEN=$(openssl rand -hex 16)

# Update in Directus (requires Admin token)
curl -X PATCH "$DIRECTUS_URL/users/$USER_ID" \
  -H "Authorization: Bearer $ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d "{\"token\": \"$NEW_TOKEN\"}"

# Update in Secret Manager
echo -n "$NEW_TOKEN" | gcloud secrets versions add DIRECTUS_AGENT_XXX_TOKEN \
  --project="github-chatgpt-ggcloud" \
  --data-file=-
```

### Add New Agent

1. Create user in Directus with AI_AGENT role
2. Generate static token
3. Store token in Secret Manager with pattern: `DIRECTUS_AGENT_{ID}_TOKEN`
4. Update this registry document

---

*Generated by WEB-35-ULTRA automation on 2026-01-31*
